# Math Basic Notes

## 立直麻将

Riichi Mahjong.

### 牌种

- 数牌：
  - 二-八: 中张牌.
  - 一/九: 老头牌.
- 字牌:
  - 风牌: 东/南/西/北.
  - 三元牌: 白/发/中.
- 幺九牌: 老头牌 + 字牌.

### 胡牌

存在役种的情况下, 14 张手牌形成以下牌型之一:

- 四面子 (刻子或顺子) + 一雀头 (对子).
- 七小对: 门清限定, 不可有相同对子.
- 国士无双: 全幺九牌 + 一对子.

胡牌又分为自摸与荣和.

### 听牌

- 两面听: 23 听 1 4.
- 双碰听: 22 55 听 2 5.
- 坎张听: 24 听 3.
- 边张听: 12 听 3, 89 听 7.
- 单骑听: 雀头.

### 鸣牌

- 吃: 顺子 + 上家.
- 碰: 刻子 + 任意家.
- 杠:
  - 大明杠.
  - 加杠 (碰上加杠).
  - 暗杠 (自摸暗杠): 不属于鸣牌.

:::tip 门清限定
门前清指没有任何鸣牌 (暗杠不属于鸣牌).

立直麻将诸多役种都需要在门清状况下才成立,
称为门清限定.
:::

:::tip 鸣牌降番
某些役种在存在鸣牌的情况下,
会比门前清胡牌时少一番.
:::

### 役种

#### 常见役种

- 一番役:
  - 立直: **(门清)** 报听.
  - 一发: **(门清)** 立直一巡内自摸.
  - 断幺九: 二八数牌.
  - 役牌: `场风牌`/`自风牌`/`三元牌` 刻子或杠子.
  - 平和: **(门清)** 四顺子 + 两面听 + 非役牌雀头.
  - 门清自摸和.
  - 一杯口: **(门清)** 两相同顺子.
  - 岭上开花: 杠牌后摸岭上牌自摸.
  - 海底摸月: 海底牌自摸.
  - 河底捞鱼: 海底牌荣和.
- 二番役:
  - 三色同顺: **(降番)** 三组数字相同, 花色不同的顺子.
  - 一气贯通 (一通): **(降番)** 1-9 同色顺子.
  - 混全带幺九 (混全/全带): **(降番)** 所有元素包含至少一张幺九牌.
  - 七对子 (七对): **(门清)** 不可有相同对子.
  - 对对和 (对对). 四面子都是刻子或杠子.
  - 三暗刻: 手牌有三暗刻或暗杠.
- 三番役:
  - 混一色 (混一): **(降番)** 所有元素由同一种花色和字牌构成.
  - 纯全带幺九 (纯全): **(降番)** 所有元素包含至少一张老头牌.
- 六番役:
  - 清一色 (清一): **(降番)** 所有元素由同一种花色构成.

#### 一番役

- 立直: **(门清)** 报听.
- 一发: **(门清)** 立直一巡内自摸.
- 断幺九: 二八数牌.
- 役牌: `场风牌`/`自风牌`/`三元牌` 刻子或杠子.
- 平和: **(门清)** 四顺子 + 两面听 + 非役牌雀头.
- 门清自摸和.
- 一杯口: **(门清)** 两相同顺子.
- 岭上开花: 杠牌后摸岭上牌自摸.
- 海底摸月: 海底牌自摸.
- 河底捞鱼: 海底牌荣和.
- 抢杠: 加杠荣和.

#### 二番役

- 三色同顺: **(降番)** 三组数字相同, 花色不同的顺子.
- 一气贯通 (一通): **(降番)** 1-9 同色顺子.
- 混全带幺九 (混全/全带): **(降番)** 所有元素包含至少一张幺九牌.
- 七对子 (七对): **(门清)** 不可有相同对子.
- 对对和 (对对). 四面子都是刻子或杠子.
- 三暗刻: 手牌有三暗刻或暗杠.
- 小三元: 两组三元牌刻子 + 一组三元牌雀头.
- 混老头 (混老): 手牌全为幺九牌.
- 三色同刻: 三组数字相同, 花色不同的刻子.
- 三杠子: 三杠子 (大明杠/加杠/暗杠).
- 双立直: **(门清)** 第一次摸牌就报听.

#### 三番役

- 混一色 (混一): **(降番)** 所有元素由同一种花色和字牌构成.
- 纯全带幺九 (纯全): **(降番)** 所有元素包含至少一张老头牌.
- 二杯口: **(门清)** 两组一杯口.

#### 六番役

- 清一色 (清一): **(降番)** 所有元素由同一种花色构成.

#### 役满

- 四暗刻: **(门清)** 四暗刻或暗杠.
- 国士无双: **(门清)** 全幺九牌 + 一对子.
- 大三元: 三组三元牌刻子.
- 字一色: 手牌全为字牌.
- 小四喜: 三组风牌刻子 + 一组风牌雀头.
- 绿一色: 手牌全为二索/四索/六索/八索/青发.
- 清老头: 手牌全为老头牌.
- 四杠子: 四组杠子.
- 九连宝灯: **(门清)** 111 2345678 999 + 任一张同花色牌.
- 天和: **(门清)** 亲家 + 初始 14 张配牌自摸.
- 地和: **(门清)** 自家 + 第一巡摸牌自摸.

#### 双役满

- 四暗刻单骑: **(门清)** 四组暗刻或暗杠, 听牌为雀头.
- 国士无双十三面: **(门清)** 13 张幺九牌, 听牌为任意一张幺九牌.
- 大四喜: 四组风牌刻子.
- 纯正九连宝灯: **(门清)** 111 2345678 999, 听牌为任意一张同花色牌.

#### 特殊役

- 流局满贯: 流局时, 只打出过幺九牌, 且没被任何人鸣过牌.

### 振听

处在振听状态下, 无法荣和, 只能自摸.

#### 捨牌振听

- 曾打出过当前听牌 (胡牌型, 不考虑役种), 进入捨牌振听, 所有听牌都无法荣和, 只能自摸.
- 解除方法: 换听其他没有振听的牌.
- 意味着可以**安全打出**其他三家**河牌与副露**,
  通过看牌避免放铳, 强调立直麻将的防守性.

#### 同巡振听

- 听牌时, 没有荣和他人的牌, 进入同巡振听.
- 解除方法: 下一次自己打出任何牌.
- 意味着在一巡中可以**安全打出**上家打出过的牌,
  通过看牌避免放铳, 强调立直麻将的防守性.

#### 立直后振听

- 立直听牌时, 若出现可以胡的牌, 但没有进行胡牌, 进入立直后振听.
- 一直持续到此局结束, 意味着此局只能自摸.

:::tip 竞技麻将
振听规则是奠定立直麻将防守战术的基石.
:::

### Mahjong Defense

- 筋牌: 现物 `+3`/`+3`.
  - 满筋: 现物有 1 7, 则 4 是满筋牌.
  - 边筋: 1 9.
  - 半筋: 现物只有 1, 则 4 是半筋牌, 不太安全 (e.g 56 听 47).
- 壁牌: 四枚可见 `+1`/`-1`.
- 薄壁牌: 四枚可见 `+1`/`-1`.

筋牌和壁牌可用于判断某张牌的安全程度:

- 2 四枚可见 + 现物 7: 4 的安全性大大增加.

### Mahjong Reference

- [Li, Junjie, et al. "Suphx: Mastering mahjong with deep reinforcement learning." arXiv preprint arXiv:2003.13590 (2020).](https://arxiv.org/pdf/2003.13590.pdf)
